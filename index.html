<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pushwoosh Web SDK 3.0 Demo</title>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º SDK -->
  <script src="https://cdn.pushwoosh.com/webpush/v3/pushwoosh-web-notifications.js" defer></script>

  <script>
    var Pushwoosh = Pushwoosh || [];

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK
    Pushwoosh.push(['init', {
      logLevel: 'debug',
      applicationCode: 'BF7A8-37DB4', // —Ç–≤–æ–π Application Code
      apiToken: 'aZicon0JByIZpTAjnCR0SLfkGTSH2IrnNJkfGrzQlsguWEbf5iQpJzazSGMoJ0m1tj4XKvAl8lXFAfhvZIAm',
      defaultNotificationTitle: 'Pushwoosh Demo',
      defaultNotificationImage: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/512px-React-icon.svg.png',
      defaultNotificationUrl: 'https://sappysue.github.io/',
      serviceWorkerUrl: 'pushwoosh-service-worker.js',
      autoSubscribe: false, // –≤–∫–ª—é—á–∏–º –ø–æ–¥–ø–∏—Å–∫—É –≤—Ä—É—á–Ω—É—é –ø–æ –∫–Ω–æ–ø–∫–µ
      subscribeWidget: {
        enable: false
      }
    }]);

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
    Pushwoosh.push(['onLoad', function(api) {
      console.log('‚úÖ Pushwoosh SDK –∑–∞–≥—Ä—É–∂–µ–Ω');

      // –°–æ–±—ã—Ç–∏–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ
      Pushwoosh.addEventHandler('receive-push', function(payload) {
        console.log('üì¨ –ü–æ–ª—É—á–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:', payload.notification);
      });

      // –°–æ–±—ã—Ç–∏–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ
      Pushwoosh.addEventHandler('open-notification', function(payload) {
        console.log('üì® –û—Ç–∫—Ä—ã—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:', payload.notification);
      });

      // –°–æ–±—ã—Ç–∏–µ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ
      Pushwoosh.addEventHandler('hide-notification', function(payload) {
        console.log('üõë –ó–∞–∫—Ä—ã—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:', payload.notification);
      });
    }]);
  </script>
</head>
<body>
  <h1>Pushwoosh Demo</h1>

  <button onclick="subscribeUser()">üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>

  <script>
    function subscribeUser() {
      Pushwoosh.push(function(api) {
        api.subscribe().then(() => {
          console.log('üëç –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è');
        }).catch((err) => {
          console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏:', err);
        });
      });
    }
  </script>
</body>
</html>
