<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Pushwoosh Demo</title>
  <script src="https://cdn.pushwoosh.com/webpush/v3/pushwoosh-web-notifications.js" defer></script>

  <script>
    var Pushwoosh = Pushwoosh || [];

    Pushwoosh.push(['init', {
      applicationCode: 'BF7A8-37DB4',
      apiToken: 'aZicon0JByIZpTAjnCR0SLfkGTSH2IrnNJkfGrzQlsguWEbf5iQpJzazSGMoJ0m1tj4XKvAl8lXFAfhvZIAm',
      logLevel: 'debug',
      defaultNotificationTitle: 'Pushwoosh Demo',
      defaultNotificationUrl: 'https://sappysue.github.io/',
      defaultNotificationImage: 'https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg',
      serviceWorkerUrl: 'pushwoosh-service-worker.js',
      autoSubscribe: false,
      subscribeWidget: { enable: false }
    }]);

    Pushwoosh.push(['onLoad', function(api) {
      window.pwApi = api;

      console.log('✅ SDK загружен');
      console.log('→ Доступные методы API:', Object.keys(api));

      // Подписка (этот метод точно существует в SDK 3)
      api.subscribe().then(() => {
        console.log('✅ Подписка выполнена');
        console.log('HWID:', api.getHWID?.());
        console.log('Token:', api.getPushToken?.());
      }).catch(err => {
        console.error('❌ Ошибка подписки:', err.message);
      });
    }]);
  </script>
</head>
<body>
  <h1>Pushwoosh Web SDK v3</h1>
</body>
</html>
